<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Spaceship Control Center</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <style>
        body {
            background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
            color: white;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 20px;
        }
        
        .progress {
            height: 30px;
            border-radius: 15px;
            margin-top: 10px;
            margin-bottom: 20px;
        }
        
        .matter-stream-bar {
            background-color: green;
        }
        
        .antimatter-stream-bar {
            background-color: orangered;
        }

        .carbon-dioxide-level-bar {
            background-color: darkred;
        }

        .gravity-level-bar {
            background-color: #008080;
          }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h2>Propulsion</h2>
                    <p id="propulsion-status"><i class="fas fa-spinner fa-spin mr-2"></i> Loading propulsion system status...</p>
                </div>
            </div>
            <div class="card-body">
                <h5>Matter Stream</h5>
                <div class="progress">
                    <div id="matter-stream-bar" class="progress-bar matter-stream-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <h5>Antimatter Stream</h5>
                <div class="progress">
                    <div id="antimatter-stream-bar" class="progress-bar antimatter-stream-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h2>Life Support</h2>
                    <p id="life-support-status"><i class="fas fa-spinner fa-spin mr-2"></i> Loading life support system status...</p>
                </div>
            </div>
            <div class="card-body">
                <h5>Oxygen Level</h5>
                <div class="progress">
                    <div id="oxygen-level-bar" class="progress-bar" role="progressbar" aria-valuenow="99" aria-valuemin="0" aria-valuemax="100" style="width: 99%;"></div>
                </div>
                <h5>Carbon Dioxide Level</h5>
                <div class="progress">
                    <div id="carbon-dioxide-level-bar" class="progress-bar carbon-dioxide-level-bar" role="progressbar" aria-valuenow="4" aria-valuemin="0" aria-valuemax="100" style="width: 4%;"></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
              <div class="d-flex justify-content-between align-items-center">
                <h2>Gravity Sensors</h2>
                <p id="gravity-status"><i class="fas fa-spinner fa-spin mr-2"></i> Loading gravity sensor status...</p>
              </div>
            </div>
            <div class="card-body">
              <h5>Gravity Level</h5>
              <div class="progress">
                <div id="gravity-level-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
          </div>
          
    </div>

    <script>
        // Select the progress bars by their IDs
        const matterStreamBar = document.getElementById('matter-stream-bar');
        const antimatterStreamBar = document.getElementById('antimatter-stream-bar');
        const oxygenLevelBar = document.getElementById('oxygen-level-bar');
        const carbonDioxideLevelBar = document.getElementById('carbon-dioxide-level-bar');
    
        // Select the status paragraphs by their IDs
        const propulsionStatus = document.getElementById('propulsion-status');
        const lifeSupportStatus = document.getElementById('life-support-status');
    
        // Define a function to update the progress bars and status paragraphs
        const updateData = async () => {
            try {
                // Fetch the data from the server
                const response = await fetch('/get_data');
                const data = await response.json();
    
                // Update the progress bars with the new data
                matterStreamBar.style.width = `${data.matter_stream}%`;
                antimatterStreamBar.style.width = `${data.antimatter_stream}%`;
                oxygenLevelBar.style.width = `${data.oxygen_level}%`;
                carbonDioxideLevelBar.style.width = `${data.carbon_dioxide_level}%`;
    
                // Update the propulsion system status
                if (data.propulsion_status === 'online') {
                    propulsionStatus.innerHTML = `<i class="fas fa-check-circle fa-lg text-success mr-2"></i> Propulsion systems in balance.`;
                } else {
                    propulsionStatus.innerHTML = `<i class="fas fa-exclamation-triangle fa-lg text-danger mr-2"></i> Propulsion systems out of balance.`;
                }
    
                // Update the life support system status
                if (data.life_support_status === 'online') {
                    lifeSupportStatus.innerHTML = `<i class="fas fa-check-circle fa-lg text-success mr-2"></i> Life support systems operating normally.`;
                } else {
                    lifeSupportStatus.innerHTML = `<i class="fas fa-exclamation-triangle fa-lg text-danger mr-2"></i> Life support systems offline.`;
                }
                // Update the gravity level progress bar
                gravityLevelBar.style.width = `${data.gravity_level}%`;

                // Update the gravity sensor status
                if (data.gravity_status === 'online') {
                gravityStatus.innerHTML = `<i class="fas fa-check-circle fa-lg text-success mr-2"></i> Gravity sensors operating normally.`;
                } else {
                gravityStatus.innerHTML = `<i class="fas fa-exclamation-triangle fa-lg text-danger mr-2"></i> Gravity sensors offline.`;
                }
            } catch (error) {
                console.error(error);
            }
        };
    
        // Call the updateData function once to populate the initial data
        updateData();
    
        // Call the updateData function every 5 seconds to get new data and update the UI
        setInterval(updateData, 1000);
    </script>
</body>
</html> 